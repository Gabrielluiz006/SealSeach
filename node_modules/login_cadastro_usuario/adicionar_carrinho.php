<?php
require_once './seguranca_usuario.php';

try {
    $con = getConexao();
    if(!isset($con)) {
        header('Location: ./pagefound.php');
    }
    $con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    // pegando o numero do produto e sua respectiva loja
    $numeroProduto = filter_input(INPUT_GET, 'produto', FILTER_VALIDATE_INT);
    $lojaProduto = filter_input(INPUT_GET, 'loja', FILTER_SANITIZE_SPECIAL_CHARS);
    
    // verifica se o numero e a loja sÃ£o validos
    if($numeroProduto >= 0 && $numeroProduto <= 29 && is_numeric($numeroProduto)
    && ($lojaProduto === 'Kabum' || $lojaProduto === 'Pichau')) {
        
        echo "sucess";
        $con = null;
    }else {
        $con = null;
        header('Location: ../PP1_FRONT/Produtos.php');
    }
    
} catch (PDOException $ex) {
    $ex->getMessage();
}
