<?php
require_once 'seguranca_usuario.php';

try {
    $con = getConexao();
    if(!isset($con)) {
        header('Location: ./pagefound.php');
    }
    $con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    // limitar os numeros do produto
    $options = array('options'=>array('min_range'=>0,'max_range'=>29));
    // pegando o numero do produto e sua respectiva loja
    $numeroProduto = filter_input(INPUT_GET, 'produto', FILTER_VALIDATE_INT, $options);
    $lojaProduto = filter_input(INPUT_GET, 'loja', FILTER_SANITIZE_SPECIAL_CHARS);
    
    // verifica se o numero e a loja sÃ£o validos
    if(is_numeric($numeroProduto) && ($lojaProduto === 'Kabum' || $lojaProduto === 'Pichau')) {
        
        
        $con = null;
    }else {
        $con = null;
        header('Location: ../PP1_FRONT/Produtos.php');
    }
    
} catch (PDOException $ex) {
    $ex->getMessage();
}
